<!doctype html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>IbalFarm API — Dokumentasi</title>
  <meta name="description" content="Dokumentasi resmi IbalFarm API: autentikasi token, endpoints farms/cages/animals, catatan berat & vaksin, contoh cURL, dan panduan penggunaan.">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: '#5b9cff', dark: '#2563eb' },
            ink: { light: '#0b1220', dark: '#e6edf3' },
            paper: { light: '#ffffff', dark: '#0f131a' },
            border: { light: '#e5e7eb', dark: '#1f2630' },
            muted: { light: '#5b6472', dark: '#a0a7b4' },
            accent: '#22c55e',
            danger: '#ef4444'
          },
        }
      },
      plugins: [
        function({ addBase, theme }) {
          addBase({
            'html, body': { color: theme('colors.ink.light') },
            ':root': { '--radius': '12px' },
          })
        }
      ]
    }
  </script>

  <!-- Tailwind Typography (via CDN plugin shim) -->
  <script>
    // minimal prose styles
    window.addEventListener('DOMContentLoaded', () => {
      document.documentElement.classList.add('prose-initialized');
    });
  </script>

  <!-- Favicon (opsional) -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath fill='%235b9cff' d='M8 40c8-2 14-10 24-10s16 8 24 10v10H8V40z'/%3E%3Ccircle cx='32' cy='22' r='10' fill='%2322c55e'/%3E%3C/svg%3E">
  <style>
    /* Scrollbar halus */
    :root { color-scheme: light dark; }
    .code-copy { opacity:.8; transition:.2s; }
    pre:hover .code-copy { opacity:1; }
    /* Pretty anchor offset for sticky header */
    :target { scroll-margin-top: 90px; }
  </style>
</head>
<body class="bg-white text-ink-light dark:bg-[#0b0e14] dark:text-ink-dark">
  <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:bg-brand focus:text-white focus:px-3 focus:py-2 focus:rounded-md">Lewati ke konten</a>

  <!-- Topbar -->
  <header class="sticky top-0 z-40 border-b border-border-light/70 bg-white/80 backdrop-blur dark:bg-[#0f131a]/80 dark:border-border-dark">
    <div class="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-8 w-8 rounded-lg bg-brand flex items-center justify-center text-white font-bold">IF</div>
        <div>
          <h1 class="text-base font-semibold">IbalFarm API — Dokumentasi</h1>
          <p class="text-xs text-muted-light dark:text-muted-dark">REST API: farms, cages, animals, bobot, vaksin</p>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <a href="#quickstart" class="hidden sm:inline-flex items-center gap-2 rounded-lg border border-border-light bg-white px-3 py-2 text-sm hover:bg-gray-50 dark:bg-[#0f131a] dark:hover:bg-black/20 dark:border-border-dark">
          ⚡ Quickstart
        </a>
        <a href="#endpoints" class="hidden sm:inline-flex items-center gap-2 rounded-lg bg-brand px-3 py-2 text-sm text-white hover:brightness-95">
          📚 Endpoints
        </a>
        <!-- Theme toggle -->
        <button id="themeToggle" class="rounded-lg border border-border-light px-3 py-2 text-sm hover:bg-gray-50 dark:border-border-dark dark:hover:bg-black/20" aria-label="Toggle theme">
          🌗 Mode
        </button>
        <!-- Mobile TOC toggle -->
        <button id="tocToggle" class="ml-1 inline-flex items-center rounded-lg border border-border-light px-3 py-2 text-sm hover:bg-gray-50 sm:hidden dark:border-border-dark dark:hover:bg-black/20" aria-controls="mobileToc" aria-expanded="false">
          ☰ Menu
        </button>
      </div>
    </div>
  </header>

  <div class="mx-auto max-w-7xl px-4">
    <!-- Grid -->
    <div class="relative grid grid-cols-1 gap-4 py-6 lg:grid-cols-[280px_minmax(0,1fr)]">
      <!-- Sidebar / TOC -->
      <aside class="lg:sticky lg:top-[84px] h-max">
        <!-- Mobile Drawer -->
        <div id="mobileToc" class="sm:hidden hidden rounded-xl border border-border-light bg-white p-3 dark:bg-[#0f131a] dark:border-border-dark"></div>

        <!-- Desktop TOC -->
        <nav aria-label="Daftar isi" class="hidden lg:block rounded-xl border border-border-light bg-white p-4 dark:bg-[#0f131a] dark:border-border-dark">
          <div class="space-y-5">
            <div>
              <h3 class="mb-2 text-xs font-semibold uppercase tracking-wide text-muted-light dark:text-muted-dark">Umum</h3>
              <ul class="space-y-1">
                <li><a class="block rounded-md px-2 py-1 hover:bg-gray-100 dark:hover:bg-white/5" href="#overview">Overview</a></li>
                <li><a class="block rounded-md px-2 py-1 hover:bg-gray-100 dark:hover:bg-white/5" href="#base-url">Base URL</a></li>
                <li><a class="block rounded-md px-2 py-1 hover:bg-gray-100 dark:hover:bg-white/5" href="#auth">Autentikasi</a></li>
                <li><a class="block rounded-md px-2 py-1 hover:bg-gray-100 dark:hover:bg-white/5" href="#status-error">Status & Error</a></li>
              </ul>
            </div>
            <div>
              <h3 class="mb-2 text-xs font-semibold uppercase tracking-wide text-muted-light dark:text-muted-dark">Endpoints</h3>
              <ul class="space-y-1">
                <li><a class="toc-link" href="#farms">Farms</a></li>
                <li><a class="toc-link" href="#cages">Cages</a></li>
                <li><a class="toc-link" href="#animals">Animals</a></li>
                <li><a class="toc-link" href="#weights">Animal Weights</a></li>
                <li><a class="toc-link" href="#vaccines">Animal Vaccines</a></li>
              </ul>
            </div>
            <div>
              <h3 class="mb-2 text-xs font-semibold uppercase tracking-wide text-muted-light dark:text-muted-dark">Contoh</h3>
              <ul class="space-y-1">
                <li><a class="toc-link" href="#curl">cURL</a></li>
                <li><a class="toc-link" href="#postman">Postman</a></li>
                <li><a class="toc-link" href="#schema">Skema Data</a></li>
              </ul>
            </div>
            <div>
              <h3 class="mb-2 text-xs font-semibold uppercase tracking-wide text-muted-light dark:text-muted-dark">Lainnya</h3>
              <ul class="space-y-1">
                <li><a class="toc-link" href="#security">Keamanan</a></li>
                <li><a class="toc-link" href="#contact">Kontak</a></li>
              </ul>
            </div>
          </div>
        </nav>
      </aside>

      <!-- Main -->
      <main id="main" class="space-y-6" tabindex="-1">
        <!-- Hero -->
        <section class="rounded-2xl border border-border-light bg-white p-6 dark:bg-[#0f131a] dark:border-border-dark">
          <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <div>
              <h2 class="m-0 text-2xl font-bold">IbalFarm API — Dokumentasi</h2>
              <p class="mt-1 text-sm text-muted-light dark:text-muted-dark">API manajemen peternakan (farms, cages, animals, bobot & vaksin). Auth: Bearer Token.</p>
            </div>
            <div class="flex gap-2">
              <a href="#quickstart" class="rounded-lg border border-border-light px-3 py-2 text-sm hover:bg-gray-50 dark:border-border-dark dark:hover:bg-white/5">⚡ Quickstart</a>
              <a href="#endpoints" class="rounded-lg bg-brand px-3 py-2 text-sm text-white hover:brightness-95">📚 Endpoints</a>
            </div>
          </div>
        </section>

        <!-- Content card -->
        <section class="rounded-2xl border border-border-light bg-white p-6 dark:bg-[#0f131a] dark:border-border-dark">
          <article class="prose max-w-none dark:prose-invert">
            <!-- Overview -->
            <h2 id="overview">Overview</h2>
            <p><strong>IbalFarm API</strong> menyediakan layanan REST untuk mengelola peternakan: <em>Farm</em>, <em>Cage</em>, <em>Animal</em>, serta catatan <em>Berat</em> dan <em>Vaksin</em>. Semua response dalam format <code>JSON</code>.</p>
            <div class="mt-3 rounded-xl border-l-4 border-accent bg-green-50 p-3 text-sm dark:bg-green-900/20">
              <strong>Auth:</strong> Bearer Token (custom). Dapatkan token via <a href="#login">Login</a>, lalu kirim di header <code>Authorization: Bearer &lt;TOKEN&gt;</code>.
            </div>

            <!-- Base URL -->
            <h2 id="base-url">Base URL</h2>
            <div class="overflow-x-auto">
              <table class="w-full border-separate border-spacing-0 text-sm">
                <thead>
                  <tr class="text-left text-muted-light dark:text-muted-dark">
                    <th class="border-b border-border-light px-3 py-2 dark:border-border-dark">Lingkungan</th>
                    <th class="border-b border-border-light px-3 py-2 dark:border-border-dark">URL</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="border-b border-border-light px-3 py-2 dark:border-border-dark">Local</td>
                    <td class="border-b border-border-light px-3 py-2 font-mono dark:border-border-dark"><code>{{BASE_URL}}</code> (contoh: <code>http://localhost:8000/api</code>)</td>
                  </tr>
                  <tr>
                    <td class="px-3 py-2">Production</td>
                    <td class="px-3 py-2 font-mono">ganti sesuai domain API kamu, mis: <code>https://api.ibalfarm.com/api</code></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p class="text-muted-light dark:text-muted-dark">Seluruh contoh di halaman ini memakai placeholder <code>{{BASE_URL}}</code>. Ganti dengan URL kamu.</p>

            <!-- Quickstart -->
            <h2 id="quickstart">Quickstart</h2>
            <ol>
              <li><strong>Login</strong> untuk mendapatkan token.</li>
              <li>Gunakan token pada semua request protected: <code>Authorization: Bearer &lt;TOKEN&gt;</code>.</li>
              <li>Coba endpoint <a href="#farms">Farms</a> untuk membuat farm pertama kamu.</li>
            </ol>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs dark:border-border-dark" data-copy>
                Copy
              </button>
              <pre class="overflow-auto rounded-xl border border-border-light bg-[#0b0e14] p-3 text-xs text-gray-100 dark:border-border-dark"><code>curl -X POST {{BASE_URL}}/auth/login \
  -H "Content-Type: application/json" -H "Accept: application/json" \
  -d '{"login":"admin@ibalfarm.local","password":"admin123"}'</code></pre>
            </div>

            <!-- Auth -->
            <h2 id="auth">Autentikasi</h2>
            <h3 id="login">Login</h3>
            <p>Mendapatkan token untuk dipakai pada request berikutnya.</p>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">POST</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/auth/login</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Headers</th><td class="px-3 py-2"><code>Content-Type: application/json</code>, <code>Accept: application/json</code></td></tr>
                </tbody>
              </table>
            </div>
            <div class="grid gap-3 sm:grid-cols-2">
              <div class="relative">
                <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
                <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "login": "email atau username",
  "password": "password"
}</code></pre>
              </div>
              <div class="relative">
                <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "token": "44da5ae8...&lt;64-hex&gt;..."
}</code></pre>
              </div>
            </div>

            <h3>Register (opsional/dev)</h3>
            <p>Buat user baru dan langsung dapat token. <span class="text-muted-light dark:text-muted-dark">(Sebaiknya dimatikan di production)</span></p>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "name": "Admin",
  "username": "admin",
  "email": "admin@contoh.local",
  "password": "admin123"
}</code></pre>
            </div>

            <h3>Profil (cek token)</h3>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/auth/me</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Headers</th><td class="px-3 py-2"><code>Authorization: Bearer &lt;TOKEN&gt;</code></td></tr>
                </tbody>
              </table>
            </div>

            <h3>Logout</h3>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">POST</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/auth/logout</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Headers</th><td class="px-3 py-2"><code>Authorization: Bearer &lt;TOKEN&gt;</code></td></tr>
                </tbody>
              </table>
            </div>

            <!-- Endpoints -->
            <h2 id="endpoints">Endpoints</h2>

            <h3 id="farms">Farms</h3>
            <p>Kelola data peternakan milik user login.</p>
            <h4>List Farms</h4>
            <div class="overflow-x-auto text-sm">
              <table class="w-full">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/farms?search=&lt;string&gt;</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Headers</th><td class="px-3 py-2"><code>Authorization: Bearer &lt;TOKEN&gt;</code></td></tr>
                </tbody>
              </table>
            </div>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "data": [
    { "id": 1, "name": "Bojay Farm", "location": "Bangkalan", "notes": "Sapi & kambing", "owner_id": 1, "cages_count": 3, "created_at": "...", "updated_at": "..." }
  ],
  "links": { "...": "..." },
  "meta": { "current_page": 1, "per_page": 10, "total": 1 }
}</code></pre>

            <h4>Create Farm</h4>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "name": "Bojay Farm",
  "location": "Bangkalan",
  "notes": "Catatan opsional"
}</code></pre>
            </div>

            <h4>Show / Update / Delete</h4>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Show</th><td class="px-3 py-2"><code>GET {{BASE_URL}}/farms/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Update</th><td class="px-3 py-2"><code>PUT {{BASE_URL}}/farms/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Delete</th><td class="px-3 py-2"><code>DELETE {{BASE_URL}}/farms/{id}</code></td></tr>
                </tbody>
              </table>
            </div>

            <hr class="my-6 border-border-light dark:border-border-dark">

            <h3 id="cages">Cages</h3>
            <p>Kandang di dalam sebuah farm.</p>
            <h4>List Cages</h4>
            <div class="overflow-x-auto text-sm">
              <table class="w-full">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/cages?farm_id=&lt;id&gt;</code></td></tr>
                </tbody>
              </table>
            </div>

            <h4>Create Cage</h4>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "farm_id": 1,
  "code": "KDG-01",
  "type": "sapi",
  "capacity": 20,
  "notes": ""
}</code></pre>
            </div>

            <h4>Show / Update / Delete</h4>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Show</th><td class="px-3 py-2"><code>GET {{BASE_URL}}/cages/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Update</th><td class="px-3 py-2"><code>PUT {{BASE_URL}}/cages/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Delete</th><td class="px-3 py-2"><code>DELETE {{BASE_URL}}/cages/{id}</code></td></tr>
                </tbody>
              </table>
            </div>

            <hr class="my-6 border-border-light dark:border-border-dark">

            <h3 id="animals">Animals</h3>
            <p>Hewan ternak per kandang (cage).</p>
            <h4>List Animals</h4>
            <div class="overflow-x-auto text-sm">
              <table class="w-full">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/animals?cage_id=&lt;id&gt;&amp;species=&lt;text&gt;&amp;status=&lt;active|sold|dead&gt;&amp;search=&lt;tag&gt;</code></td></tr>
                </tbody>
              </table>
            </div>

            <h4>Create Animal</h4>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "cage_id": 10,
  "tag": "SAPI-001",
  "species": "sapi",
  "breed": "",
  "sex": "M",
  "status": "active",
  "notes": ""
}</code></pre>
            </div>

            <h4>Show / Update / Delete</h4>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Show</th><td class="px-3 py-2"><code>GET {{BASE_URL}}/animals/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Update</th><td class="px-3 py-2"><code>PUT {{BASE_URL}}/animals/{id}</code></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">Delete</th><td class="px-3 py-2"><code>DELETE {{BASE_URL}}/animals/{id}</code></td></tr>
                </tbody>
              </table>
            </div>

            <hr class="my-6 border-border-light dark:border-border-dark">

            <h3 id="weights">Animal Weights</h3>
            <h4>List</h4>
            <div class="overflow-x-auto text-sm">
              <table class="w-full">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/animals/{animal_id}/weights</code></td></tr>
                </tbody>
              </table>
            </div>

            <h4>Create</h4>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "weighed_at": "2025-09-19",
  "weight_kg": 220.5,
  "method": "",
  "notes": ""
}</code></pre>
            </div>

            <hr class="my-6 border-border-light dark:border-border-dark">

            <h3 id="vaccines">Animal Vaccines</h3>
            <h4>List</h4>
            <div class="overflow-x-auto text-sm">
              <table class="w-full">
                <tbody>
                <tr><th class="w-36 px-3 py-2 text-left text-muted-light dark:text-muted-dark">Method</th><td class="px-3 py-2"><span class="rounded-full border px-2 py-0.5 text-xs">GET</span></td></tr>
                <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">URL</th><td class="px-3 py-2"><code>{{BASE_URL}}/animals/{animal_id}/vaccines</code></td></tr>
                </tbody>
              </table>
            </div>

            <h4>Create</h4>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "vaccinated_at": "2025-09-19",
  "vaccine_name": "Anthrax",
  "dose": "",
  "notes": ""
}</code></pre>
            </div>

            <!-- Status -->
            <h2 id="status-error">Status Kode & Error</h2>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <tbody>
                  <tr><th class="w-24 px-3 py-2 text-left text-muted-light dark:text-muted-dark">200</th><td class="px-3 py-2">OK – Permintaan sukses</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">201</th><td class="px-3 py-2">Created – Data berhasil dibuat</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">204</th><td class="px-3 py-2">No Content – Tanpa body (mis: delete)</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">400</th><td class="px-3 py-2">Bad Request – Format salah</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">401</th><td class="px-3 py-2">Unauthorized – Token tidak ada/invalid</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">403</th><td class="px-3 py-2">Forbidden – Resource bukan milik user</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">404</th><td class="px-3 py-2">Not Found – Resource tidak ditemukan</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">422</th><td class="px-3 py-2">Unprocessable Entity – Validasi gagal</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">429</th><td class="px-3 py-2">Too Many Requests – Rate limit</td></tr>
                  <tr><th class="px-3 py-2 text-left text-muted-light dark:text-muted-dark">500</th><td class="px-3 py-2">Internal Server Error – Cek log server</td></tr>
                </tbody>
              </table>
            </div>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{
  "message": "The given data was invalid.",
  "errors": { "tag": ["The tag has already been taken."] }
}</code></pre>

            <!-- cURL -->
            <h2 id="curl">Contoh cURL</h2>
            <h3>Login</h3>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>curl -X POST {{BASE_URL}}/auth/login \
  -H "Content-Type: application/json" -H "Accept: application/json" \
  -d '{"login":"admin@ibalfarm.local","password":"admin123"}'</code></pre>
            </div>

            <h3>List Farms</h3>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>curl {{BASE_URL}}/farms \
  -H "Accept: application/json" \
  -H "Authorization: Bearer &lt;TOKEN&gt;"</code></pre>
            </div>

            <h3>Create Animal</h3>
            <div class="relative">
              <button class="code-copy absolute right-2 top-2 rounded-md border px-2 py-1 text-xs" data-copy>Copy</button>
              <pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>curl -X POST {{BASE_URL}}/animals \
  -H "Content-Type: application/json" -H "Accept: application/json" \
  -H "Authorization: Bearer &lt;TOKEN&gt;" \
  -d '{"cage_id":10,"tag":"SAPI-001","species":"sapi","sex":"M","status":"active"}'</code></pre>
            </div>

            <!-- Postman -->
            <h2 id="postman">Postman</h2>
            <ol>
              <li>Buat request <kbd class="rounded-md border px-1">POST</kbd> <code>{{BASE_URL}}/auth/login</code> → ambil token.</li>
              <li>Set <em>Collection / Environment variable</em> bernama <code>token</code>.</li>
              <li>Di setiap request protected, tambah header: <code>Authorization: Bearer {{token}}</code></li>
            </ol>
            <div class="mt-3 rounded-xl border-l-4 border-danger bg-red-50 p-3 text-sm dark:bg-red-900/20">
              Jika muncul <strong>422</strong>, periksa bahwa Body kamu <em>raw JSON</em> dan header <code>Content-Type: application/json</code> aktif.
            </div>

            <!-- Schema -->
            <h2 id="schema">Skema Data (ringkas)</h2>
            <h3>Farm</h3>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{ "id": 1, "name": "string", "location": "string|null", "notes": "string|null", "owner_id": 1, "created_at": "...", "updated_at": "..." }</code></pre>
            <h3>Cage</h3>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{ "id": 10, "farm_id": 1, "code": "string", "type": "string|null", "capacity": 0, "notes": "string|null" }</code></pre>
            <h3>Animal</h3>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{ "id": 99, "cage_id": 10, "tag": "string", "species": "string", "breed": "string|null", "sex": "M|F|null", "birth_date": "date|null", "entry_date": "date|null", "status": "active|sold|dead", "notes": "string|null" }</code></pre>
            <h3>AnimalWeight</h3>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{ "id": 1, "animal_id": 99, "weighed_at": "date", "weight_kg": "decimal", "method": "string|null", "notes": "string|null" }</code></pre>
            <h3>AnimalVaccine</h3>
<pre class="rounded-xl border bg-[#0b0e14] p-3 text-xs text-gray-100"><code>{ "id": 1, "animal_id": 99, "vaccinated_at": "date", "vaccine_name": "string", "dose": "string|null", "notes": "string|null" }</code></pre>

            <!-- Security -->
            <h2 id="security">Keamanan & Praktik Baik</h2>
            <ul>
              <li>Simpan token di klien secara aman (jangan commit ke repo publik).</li>
              <li>Batasi CORS hanya ke domain frontend produksi.</li>
              <li>Matikan endpoint <em>register</em> publik jika tidak dibutuhkan.</li>
              <li>Aktifkan HTTPS di production, dan lakukan backup database rutin.</li>
            </ul>

            <!-- Contact -->
            <h2 id="contact">Kontak / Lisensi</h2>
            <p><strong>Developer &amp; Maintainer:</strong> Hambali Fitrianto</p>
            <p><strong>Email:</strong> <em>hambali.fitrianto01@gmail.com</em></p>
            <p><strong>Lisensi:</strong> <em>MIT / Proprietary</em></p>

            <footer class="mt-10 border-t pt-4 text-sm text-muted-light dark:text-muted-dark">
              <p>IbalFarm API Docs • dibuat dengan ❤ • Mode <span id="modeLabel">Terang</span></p>
            </footer>
          </article>
        </section>
      </main>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Persisted theme
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const modeLabel = document.getElementById('modeLabel');

    function setTheme(mode) {
      const dark = mode === 'dark';
      root.classList.toggle('dark', dark);
      localStorage.setItem('theme', dark ? 'dark' : 'light');
      modeLabel && (modeLabel.textContent = dark ? 'Gelap' : 'Terang');
    }
    const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    setTheme(savedTheme);
    themeToggle.addEventListener('click', () => setTheme(root.classList.contains('dark') ? 'light' : 'dark'));

    // Smooth TOC for mobile
    const tocToggle = document.getElementById('tocToggle');
    const mobileToc = document.getElementById('mobileToc');
    const desktopToc = document.querySelector('aside nav');
    if (tocToggle && mobileToc && desktopToc) {
      // clone TOC into mobile drawer
      mobileToc.innerHTML = desktopToc.innerHTML;
      tocToggle.addEventListener('click', () => {
        const isHidden = mobileToc.classList.contains('hidden');
        mobileToc.classList.toggle('hidden', !isHidden);
        tocToggle.setAttribute('aria-expanded', String(isHidden));
      });
      // close drawer when clicking a link
      mobileToc.addEventListener('click', (e) => {
        if (e.target.tagName === 'A') {
          mobileToc.classList.add('hidden');
          tocToggle.setAttribute('aria-expanded', 'false');
        }
      });
    }

    // Copy buttons for all <pre><code>
    document.querySelectorAll('[data-copy]').forEach(btn => {
      btn.addEventListener('click', () => {
        const pre = btn.nextElementSibling; // the <pre>
        const code = pre?.querySelector('code')?.innerText || '';
        navigator.clipboard.writeText(code).then(() => {
          const old = btn.textContent;
          btn.textContent = 'Copied!';
          setTimeout(() => (btn.textContent = old), 1200);
        });
      });
    });

    // Add anchor links to headings (h2/h3)
    document.querySelectorAll('article h2[id], article h3[id]').forEach(h => {
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.className = 'ml-2 text-brand hover:underline';
      a.setAttribute('aria-label', 'Link ke bagian ' + h.textContent);
      a.textContent = '#';
      h.appendChild(a);
    });
  </script>
</body>
</html>
